<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" href="src/styles.scss" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />

    <!-- Robots -->
    <meta name="robots" content="noindex, nofollow" />
    <!-- Device -->

    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=5"
    />

    <!-- Title -->
    <title>Crowdfunding Product page</title>
    <!-- Description -->
    <meta name="description" content="Home description." />

    <!-- Favicon -->
    <link rel="icon" href="./assets/favicon-32x32.png" type="image/x-icon" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Commissioner:400,500,700"
    />
  </head>

  <body>
    <div id="global_container">
      <header>
        <div id="topbar">
          <img id="logo" src="./assets/logo.svg" alt="logo" />
          <img
            id="hamburger"
            src="./assets/icon-hamburger.svg"
            alt="icon-hamburger"
            onclick="showMenu()"
          />

          <img
            id="close-menu"
            src="./assets/icon-close-menu.svg"
            alt="icon-close-menu"
            onclick="hideMenu()"
          />
        </div>
        <menu id="menu">
          <ul>
            <li>About</li>
            <li>Discover</li>
            <li>Get Started</li>
          </ul>
        </menu>
      </header>

      <section id="headline">
        <img
          id="mastercraft_logo"
          src="./assets/logo-mastercraft.svg"
          alt="logo-mastercraft"
        />
        <h1>
          Mastercraft Bamboo
          Monitor Riser
        </h1>
        <p>
          A beautifully handcrafted monitor stand to reduce neck and eye strain.
        </p>
        <div id="buttons">
          <button class="button" onclick="showPledgeModal()">Back this project</button>

          <button id="button_bookmark" class="button bookmark" onclick="toggle_bookmark('check')">
            <img src="./assets/icon-bookmark.svg" alt="icon-bookmark"  />
          </button>

          <button id="button_check" class="button bookmark" onclick="toggle_bookmark('bookmark')">
            <img src="./assets/icon-check.svg" alt="icon-check"  />
            <p>Bookmark</p>
          </button>

        </div>
      </section>

      <section id="numbers">
        <div class="desktop_horizontal">
          <div class="number_emphase" id="pledge_total_display">$89,914<p>of $100,000 backed</p></div>
          

          <hr />

          <div class="number_emphase" id="backers_display">5,007<p>total backers</p></div>
          

          <hr />

          <div class="number_emphase">56<p>days left</p></div>
          
        </div>
        <div id="progress_container">
          <progress id="progress" max="100000" value="89914"></progress>
        </div>
      </section>

      <section id="about">
        <article id="description">
          <h2>About this project</h2>
          <p>
            The Mastercraft Bamboo Monitor Riser is a sturdy and stylish
            platform that elevates your screen to a more comfortable viewing
            height. Placing your monitor at eye level has the potential to
            improve your posture and make you more comfortable while at work,
            helping you stay focused on the task at hand.
            <br />
            <br />
            Featuring artisan craftsmanship, the simplicity of design creates
            extra desk space below your computer to allow notepads, pens, and
            USB sticks to be stored under the stand.
          </p>
        </article>

        <div id="funding_options">
          <ul>
            <li>
              <h3>Bamboo Stand</h3>
              <span id="cost">Pledge $25 or more</span>
              <p>
                You get and ergonomic stand made of natural bamboo. You've
                helped us launch our promotional campaign, and you'll be added
                to a special Backer member list.
              </p>
              <div class="desktop_display">
                <div id="quantity"><span class="bamboo_left">101</span>left</div>
                <button class="button" onclick="showPledgeModal('bamboo')" >Select reward</button>
              </div>
              
            </li>

            <li>
              <h3>Black Edition Stand</h3>
              <span id="cost">Pledge $75 or more</span>
              <p>
                You get a Black Special Edition computer stand and a personal
                thank you. You'll be added to our Backer member list. Shipping
                is included.
              </p>
              <div class="desktop_display">
              <div id="quantity"><span class="black_left">64</span>left</div>
              <button class="button" onclick="showPledgeModal('black')">Select reward</button>
            </div>
            </li>

            <li class="disabled">
              <h3>Mahogany Special Edition</h3>
              <span id="cost">Pledge $200 or more</span>
              <p>
                You get two Special Edition Mahogany stands, a Backer T-Shirt,
                and a personal thank you. You'll be added to our Backer member
                list. Shipping is included.
              </p>
              <div class="desktop_display">
              <div id="quantity"><span>0</span>left</div>
              <button class="button disabled" onclick="showPledgeModal('mahogany')"">Out of stock</button>
            </div>           
            </li>
          </ul>
        </div>
      </section>

      <!-- modals -->
      <!-- -pledge -->
      <div id="modal_pledge">
        <div id="modal_header">
          <h2>Back this project</h2>
          <img src="./assets/icon-close-modal.svg" alt="icon-close-modal" onclick="hidePledgeModal()"/>
        </div>
        <p id="pledge_description">
          Want to support us in bringing Mastercraft Bamboo Monitor Riser out in
          the world?
        </p>

        <ul>
          <li class="option" id="free" onclick="selectOption('free')">
            <div id="pledge_type">
              <input class="checkbox" type="checkbox" id="free_checkbox" name="" id="" />
              <h3>Pledge with no reward</h3>
            </div>

            <p>
              Choose to support us without a reward if you simply believe in our
              project. As a backer, you'll be signed up to receive product
              updates via email.
            </p>
            <div class="pledge_amount" id="free_pledge_amount">
              <hr />
              <div id="input">
                <button class="button" onclick="pledge('free','0')">Continue</button>
              </div>
              <p><br></p>
            </div>
          </li>


        <!-- Bamboo -->
          <li class="option" id="bamboo"  onclick="selectOption('bamboo')">
            <div id="pledge_type">
              <input class="checkbox"  id="bamboo_checkbox" type="checkbox" name="" id="" />
              <div>
                <h3>Bamboo Stand</h3>
                <span>Pledge $25 or more</span>
              </div>
            </div>
            <p>
              You get an ergonomic stand made of natural bamboo. You've helped
              us launch our promotional campaign, and you'll be added to a
              special Backer member list.
            </p>
            <div id="left"><span class="bamboo_left">101</span>left</div>
            <div class="pledge_amount" id="bamboo_pledge_amount">
              <hr />
              <p id="pledge_label">Enter your pledge</p>
              <div id="input">
                <input type="number" name="" id="input_bamboo_pledge" value="25" />
                <span class="unit">$</span>
                <button class="button" onclick="pledge('bamboo',document.getElementById('input_bamboo_pledge').value)">Continue</button>
              </div>
            </div>
          </li>

          <!-- Black -->
          <li class="option" id="black" onclick="selectOption('black')">
            <div id="pledge_type">
              <input  class="checkbox"  id="black_checkbox" type="checkbox" name="" id="" />
              <div>
                <h3>Black Edition Stand</h3>
                <span>Pledge $75 or more</span>
              </div>
            </div>
            <p>
              You get a Black Special Edition computer stand and a personal
              thank you. You'll be added to our Backer member list. Shipping is
              included.
            </p>
            <div id="left">
              <span class="black_left">64</span>left
            </div>
            <div class="pledge_amount" id="black_pledge_amount">
              <hr />
              <p id="pledge_label">Enter your pledge</p>
              <div id="input">
                <input type="number" name="" id="input_black_pledge" value="75" />
                <span class="unit">$</span>
                <button class="button" onclick="pledge('black',document.getElementById('input_black_pledge').value)">Continue</button>
              </div>
            </div>
          </li>

          <!-- Mahogany -->
          <li  class="option disabled" id="mahogany" >
            <div id="pledge_type">
              <input  class="checkbox"  id="mahogany_checkbox" type="checkbox" name="" id="" disabled/>
              <div>
                <h3>Mahogany Special Edition</h3>
                <span>Pledge $200 or more</span>
              </div>
            </div>
            <p>
              You get two Special Edition Mahogany stands, a Backer T-Shirt, and
              a personal thank you. You'll be added to our Backer member list.
              Shipping is included.
            </p>
            <div id="left"><span>0</span>left</div>
         
          <div class="pledge_amount" id="mahogany_pledge_amount">
            <hr />
            <p id="pledge_label">Enter your pledge</p>
            <div id="input">
              <input type="number" name="" id="" value="200" />
              <span class="unit">$</span>
              <button class="button">Continue</button>
            </div>
          </div>
          </li>
        </ul>
      </div>

      <!-- -thankyou -->
      <div id="modal_thankyou">
        <img src="./assets/icon-check.svg" alt="icon-check" />
        <h2>Thanks for your support !</h2>
        <p>
          Your pledge brings us one step closer to sharing Mastercraft Bamboo
          Monitor Riser worldwide. You will get an email once our campaign is
          completed.
        </p>
        <button class="button" onclick="hideModalThankYou()">Got it!</button>
      </div>
    </div>

    <script type="module" src="src/index.ts"></script>
    <script>
      //bookmark
      var button_bookmark = document.getElementById("button_bookmark");
      var button_check  = document.getElementById("button_check");
      window.toggle_bookmark = function toggle_bookmark(value){
        if (value === "bookmark"){
          button_check.style.visibility = " hidden";
          button_bookmark.style.visibility = "visible";
        }
        else if (value === "check"){
          button_bookmark.style.visibility = "hidden";
          button_check.style.visibility = "visible";
        }
      }

      //default
      toggle_bookmark("bookmark");


      //GLOBAL VAR
      var pledge_total = 89914;
      var backers = 5007;
      var bamboo_left = 101;
      var black_left = 64;

      function numberWithCommas(x) {
         return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      }

      window.updatePledgeTotal = function updatePledgeTotal(value) {
        var pledge_total_display = document.getElementById("pledge_total_display");
        pledge_total_display.innerHTML = numberWithCommas(value).toString();
      }

      window.updateBackers = function updateBackers(value) {
        var backers_display = document.getElementById("backers_display");
        backers_display.innerHTML = numberWithCommas(value).toString();
      }

      window.updateLefts = function updateLefts(option,value) {
        var left_displays = document.getElementsByClassName(option);
   
        [].forEach.call(left_displays, function(el) {
          el.innerHTML = value.toString();
        });

      }

      window.updateProgressBar = function updateProgressBar(value) {
        var progress = document.getElementById("progress");
        progress.value = value;
      }

      window.addPledgeTotal = function addPledgeTotal(value){
        
        pledge_total = pledge_total+value;
  
        updatePledgeTotal(pledge_total);
        updateProgressBar(pledge_total);
      }

      window.incrementBackers = function incrementBackers(){
        backers = ++backers;
        updateBackers(backers);
      }

      window.pledge = function pledge(option,pledge_amount){

        pledge_amount_int = parseInt(pledge_amount);
        
        addPledgeTotal(pledge_amount_int);

        incrementBackers();

        
        if(option === "bamboo"){
          bamboo_left = --bamboo_left;
          updateLefts("bamboo_left",bamboo_left);


        }else if (option === "black"){
          black_left = -- black_left;
          updateLefts("black_left",black_left);
    
        }else if (option === "free"){

        }

        hidePledgeModal();
        showModalThankYou();
      }


      
      // MODAL GLOBAL

      window.showPledgeModal = function showPledgeModal(value){

        // ouvre le modal
        document.getElementById("modal_pledge").style.display = "block";

        if (value != undefined){
          selectOption(value);
        }
          
          
      }

      window.hidePledgeModal = function hidePledgeModal(){
        document.getElementById("modal_pledge").style.display = "none";

      }

    

     
      
      function check(option){
        // uncheck toutes les checkbox
        [].forEach.call(document.getElementsByClassName("checkbox"), function(element) {
            element.checked = false;
    
        });
        // check la bonne
        document.getElementById(option+"_checkbox").checked = true;
      }

      function select(option){
        // enleve toutes les classes selected des checkbox
        [].forEach.call(document.getElementsByClassName("option"), function(element) {
            element.classList.remove("selected");
    
        });

        // ajoute la classe selected à l'option selectionnée
        document.getElementById(option).classList.add("selected");
      }
      
      function showPledgeAmount(option){
        // cache tous les pledge amount
        [].forEach.call(document.getElementsByClassName("pledge_amount"), function(element) {
            element.style.display = "none";
    
        });

        // affiche le pledge amount sélectionné
        document.getElementById(option+"_pledge_amount").style.display="block";
      }
      
      window.selectOption = function  selectOption(option){

        // check option
        check(option);
          
        // apply selected class
        select(option);

        //rend visible le pledge amount
        showPledgeAmount(option);
      }

      
      
      
  
      // MODAL THANKYOU
      function showModalThankYou() {
        document.getElementById("modal_thankyou").style.visibility="visible";
      }

      window.hideModalThankYou = function hideModalThankYou() {
        document.getElementById("modal_thankyou").style.visibility="hidden";
      }



      // menu
      var hamburger_button = document.getElementById("hamburger");
      var close_button = document.getElementById("close-menu");
      var menu = document.getElementById("menu");


      window.showMenu = function showMenu() {
        menu.style.visibility = "visible";
        hamburger_button.style.visibility = "hidden";
        close_button.style.visibility = "visible";
      };

      window.hideMenu = function hideMenu() {
        menu.style.visibility = "hidden";
        hamburger_button.style.visibility = "visible";
        close_button.style.visibility = "hidden";
      };

      window.addEventListener("resize", reportWindowSize);

      function reportWindowSize() {
        if (window.innerWidth >= 1440) {
          //if the window is resized to desktop mode, reset the menu for desktop view

          menu.style.height = "80px";
          menu.style.visibility = "visible";
          hamburger_button.style.visibility = "hidden";
          close_button.style.visibility = "hidden";
        } else {
          //If the window is sized down to mobile view, close the menu
          this.hideMenu();
        }
      }
    </script>
  </body>
</html>
